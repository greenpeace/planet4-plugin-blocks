function Select2FieldsSetup(){"undefined"!==sui.views&&(sui.views.editAttributeSelect2Field.prototype.preselect=function(e){const t=String(this.getValue());if(t.length){let o={include:t,shortcode:this.shortcode.get("shortcode_tag"),attr:this.model.get("attr")};return"shortcake_newcovers"===this.shortcode.get("shortcode_tag")&&"posts"===this.model.get("attr")&&(this.ajaxData.action="planet4_blocks_post_field"),$.get(ajaxurl,$.extend(o,this.ajaxData),function(t){_.each(t.data.items,function(t){$("<option>").attr("value",t.id).text(t.text).prop("selected","selected").appendTo(e)})})}return null},sui.views.editAttributeSelect2Field.prototype.render=function(){const e=this,t={multiple:!1};for(let e in t)this.model.get(e)||this.model.set(e,t[e]);const o=this.model.toJSON();o.id="shortcode-ui-"+this.model.get("attr")+"-"+this.model.cid,this.$el.html(this.template(o));const s=this.$el.find(this.selector);void 0===this.shortcode.get("ajax_requests")&&this.shortcode.set("ajax_requests",[]);let i=this.preselect(s);if(null!==i){let e=this.shortcode.get("ajax_requests");Array.isArray(e)&&(e.push(i),this.shortcode.set("ajax_requests",e))}const c=this.model.get("meta").select2_options,a={multiple:this.model.get("multiple"),dropdownParent:this.$el,allowClear:!0,ajax:{url:ajaxurl,dataType:"json",delay:250,data:function(t){return"shortcake_newcovers"===e.shortcode.get("shortcode_tag")&&"posts"===e.model.get("attr")?(e.ajaxData.action="planet4_blocks_post_field",$.extend({type:function(){return $("input[name=cover_type]:checked").val()},s:t.term,page:t.page,shortcode:e.shortcode.get("shortcode_tag"),attr:e.model.get("attr"),action:"wp_ajax_planet4_blocks_post_field"},e.ajaxData)):$.extend({s:t.term,page:t.page,shortcode:e.shortcode.get("shortcode_tag"),attr:e.model.get("attr")},e.ajaxData)},processResults:function(e,t){const o=e.data;return t.page=t.page||1,e.success&&void 0!==e.data?{results:o.items,pagination:{more:t.page*o.items_per_page<o.found_items}}:{results:[]}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:0,templateResult:this.templateResult,templateSelection:this.templateSelection},l=Object.assign({},a,c);let d=this;return _.defer(function(){s[shortcodeUIData.select2_handle](l);d.model.get("multiple")&&d.sortable(s)},d,s),this})}function P4FieldsSetup(){if(void 0!==wp.shortcake){shortcodeUIFieldData.p4_select={encode:!1,template:"shortcode-ui-field-p4-select",view:"editAttributeHeading"},shortcodeUIFieldData.p4_checkbox={encode:!1,template:"shortcode-ui-field-p4-checkbox",view:"editAttributeHeading"},shortcodeUIFieldData.p4_radio={encode:!1,template:"shortcode-ui-field-p4-radio",view:"editAttributeHeading"};const e=function(){$(".shortcode-ui-attribute-heading2").parent().before("<p></p>"),$(".shortcode-ui-attribute-heading3").parent().before("<p></p>")};wp.shortcake.hooks.addAction("shortcode-ui.render_edit",e),wp.shortcake.hooks.addAction("shortcode-ui.render_new",e)}}function WPShortcakeHooksSetup(e){const t=this;void 0!==wp.shortcake&&(t.attach_hooks=function(){e.hooks_defined||(e.hooks_defined=!0,wp.shortcake.hooks.addAction("shortcake_newcovers.cover_type",e.blocks.NewCoversBlock.type_of_cover_change_hook),wp.shortcake.hooks.addAction("shortcake_newcovers.tags",e.blocks.NewCoversBlock.tags_change_hook),wp.shortcake.hooks.addAction("shortcake_newcovers.post_types",e.blocks.NewCoversBlock.post_types_change_hook),wp.shortcake.hooks.addAction("shortcake_newcovers.posts",e.blocks.NewCoversBlock.posts_select_change_hook),wp.shortcake.hooks.addAction("shortcake_articles.posts",e.blocks.ArticlesBlock.posts_select_change_hook),wp.shortcake.hooks.addAction("shortcake_articles.post_types",e.blocks.ArticlesBlock.page_types_change_hook),wp.shortcake.hooks.addAction("shortcake_articles.tags",e.blocks.ArticlesBlock.page_types_change_hook),wp.shortcake.hooks.addAction("shortcake_articles.read_more_link",e.blocks.ArticlesBlock.read_more_change_hook),wp.shortcake.hooks.addAction("shortcake_social_media.embed_type",e.blocks.SocialMediaBlock.embed_type_change_hook),wp.shortcake.hooks.addAction("shortcake_gallery.multiple_image",e.blocks.GalleryBlock.gallery_image_change_hook),wp.shortcake.hooks.addAction("shortcake_take_action_boxout.custom_title",e.blocks.TakeActionBoxoutBlock.edit_custom_filed_hook),wp.shortcake.hooks.addAction("shortcake_take_action_boxout.custom_excerpt",e.blocks.TakeActionBoxoutBlock.edit_custom_filed_hook),wp.shortcake.hooks.addAction("shortcake_take_action_boxout.custom_link",e.blocks.TakeActionBoxoutBlock.edit_custom_filed_hook),wp.shortcake.hooks.addAction("shortcake_take_action_boxout.custom_link_text",e.blocks.TakeActionBoxoutBlock.edit_custom_filed_hook),wp.shortcake.hooks.addAction("shortcake_take_action_boxout.custom_link_new_tab",e.blocks.TakeActionBoxoutBlock.edit_custom_filed_hook),wp.shortcake.hooks.addAction("shortcake_take_action_boxout.tag_ids",e.blocks.TakeActionBoxoutBlock.edit_custom_filed_hook),wp.shortcake.hooks.addAction("shortcake_take_action_boxout.background_image",e.blocks.TakeActionBoxoutBlock.edit_custom_filed_hook),wp.shortcake.hooks.addAction("shortcake_take_action_boxout.take_action_page",e.blocks.TakeActionBoxoutBlock.edit_custom_filed_hook)),e.blocks.SocialMediaBlock.initialize_fields()},wp.shortcake.hooks.addAction("shortcode-ui.render_new",function(o){t.attach_hooks();const s=o.get("shortcode_tag");"shortcake_columns"===s&&e.blocks.ColumnsBlock.render_new(o),"shortcake_carousel_header"===s&&e.blocks.CarouselHeaderBlock.render_new()}),wp.shortcake.hooks.addAction("shortcode-ui.render_edit",function(o){t.attach_hooks();const s=o.get("shortcode_tag"),i=s.replace("shortcake_","");if(["shortcake_articles","shortcake_newcovers"].includes(s)){const t=o.get("ajax_requests");if(null!==t){const c=$(".shortcode-ui-edit-"+s);c.addClass("not-clickable"),c.prev().prepend('<span class="spinner is-active" id="bl_loader"></span><span id="bl_loading_span">Populating block\'s fields..</span>'),c.animate({opacity:.5}),Promise.all(t).then(function(){c.animate({opacity:1}),c.removeClass("not-clickable"),$("#bl_loader").removeClass("is-active"),$("#bl_loading_span").remove(),o.unset("ajax_requests"),e.initialize_view_fields(i)})}}"shortcake_columns"===s&&e.blocks.ColumnsBlock.render_edit(o),"shortcake_carousel_header"===s&&e.blocks.CarouselHeaderBlock.render_edit()}))}function ArticlesBlock(e){this.page_types_change_hook=function(){const e=$("select[id^='shortcode-ui-post_types']").val(),t=$("select[id^='shortcode-ui-tags']").val();null===e&&null===t?$("select[id^='shortcode-ui-posts']").prop("disabled",!1):($("select[id^='shortcode-ui-posts']").val(null).trigger("change.select2"),$("select[id^='shortcode-ui-posts']").prop("disabled","disabled"))},this.posts_select_change_hook=function(){null===$("select[id^='shortcode-ui-posts']").val()?($("select[id^='shortcode-ui-tags']").prop("disabled",!1),$("select[id^='shortcode-ui-post_types']").prop("disabled",!1),$("input[name^='ignore_categories']").prop("disabled",!1)):($("select[id^='shortcode-ui-post_types']").val(null).trigger("change.select2"),$("select[id^='shortcode-ui-post_types']").prop("disabled","disabled"),$("select[id^='shortcode-ui-tags']").val(null).trigger("change.select2"),$("select[id^='shortcode-ui-tags']").prop("disabled","disabled"),$("input[name^='ignore_categories']").prop("disabled","disabled"))},this.read_more_change_hook=function(t,o){const s=e.find_view(o,"read_more_link");if("undefined"!==s&&void 0!==t.value){let e="";"undefined"!==(e=/%[0-9a-f]/i.test(t.value)?t.value:encodeURI(t.value))&&(s.model.set("value",e),$("*[id^='shortcode-ui-read_more_link-']").val(e))}},this.initialize_view_fields=function(){const e=$("select[id^='shortcode-ui-posts']").val(),t=$("select[id^='shortcode-ui-tags']").val(),o=$("select[id^='shortcode-ui-post_types']").val();null!==e?($("select[id^='shortcode-ui-post_types']").prop("disabled","disabled"),$("select[id^='shortcode-ui-tags']").prop("disabled","disabled")):null===t&&null===o||$("select[id^='shortcode-ui-posts']").prop("disabled","disabled")}}function CarouselHeaderBlock(){const e=this;e.render_new=function(){e.setDefaults()},e.render_edit=function(){e.toggle_subheaders(),e.set_maxlength(),$("input[name=block_style]").off("click").on("click",function(){e.toggle_subheaders(),e.set_maxlength()})},e.setDefaults=function(){$("input[name=carousel_autoplay]").attr("checked","checked")},e.toggle_subheaders=function(){const e=$("input[name=block_style]:checked").val();$("input[data-subheader=true]").closest(".field-block").toggle("full-width-classic"!=e)},e.add_maxlength_with_counter=function(e,t){if($(e).attr("maxlength",t),!$(e).next("div").length){$('<div class="max-length-counter">0/'+t+"</div>").insertAfter(e)}$(e).off("input").on("input",function(){const o=$(e).val().length;$(e).next("div.max-length-counter").html(o+"/"+t)})},e.set_maxlength=function(){const e=this;"full-width-classic"==$("input[name=block_style]:checked").val()?($("input[name^='header_']").each(function(){e.add_maxlength_with_counter(this,32)}),$("textarea[name^='description_']").each(function(){e.add_maxlength_with_counter(this,200)}),$("input[name^='link_text_']").each(function(){e.add_maxlength_with_counter(this,24)})):($("input[name^='header_']").attr("maxlength",40),$("textarea[name^='description_']").removeAttr("maxlength"),$("input[name^='link_text_']").removeAttr("maxlength"),$("div.maxLengthCounter").remove())}}function ColumnsBlock(){const e=this;e.render_new=function(){$(".shortcode-ui-edit-shortcake_columns").append('<div data-row="0"><button class="button button-small shortcake-columns-add-column">Add Column</button><button class="button button-small shortcake-columns-remove-column" disabled="disabled">Remove Column</button></div>'),this.hide_all_columns(),this.add_click_event_handlers()},e.render_edit=function(){$(".shortcode-ui-edit-shortcake_columns").append('<div data-row="0"><button class="button button-small shortcake-columns-add-column" data-row="1 data-action="add">Add Column</button><button class="button button-small shortcake-columns-remove-column">Remove Column</button></div>');let e=0;[1,2,3,4].forEach(function(t){""!==$(".field-block").filter($("div[class$='_"+t+"']")).children().filter($("input, textarea")).map(function(e,t){return $(t).val()}).get().join("")&&(e=t)}),$(".shortcake-columns-add-column").parent().data("row",e);for(let t=e+1;t<=4;t++)$(".field-block").filter($("div[class$='_"+t+"']")).hide();4===e&&$(".shortcake-columns-add-column").attr("disabled","disabled"),this.toggle_images(),this.add_click_event_handlers()},e.add_click_event_handlers=function(){const t=this;$(".shortcake-columns-add-column").on("click",function(e){e.preventDefault();const o=$(e.currentTarget);let s=o.parent().data("row");s<5&&(t.show_column(++s),o.parent().data("row",s),$(".shortcake-columns-remove-column").removeAttr("disabled"),4===s&&o.attr("disabled","disabled"))}),$(".shortcake-columns-remove-column").on("click",function(e){e.preventDefault();const o=$(e.currentTarget);let s=o.parent().data("row");s>=0&&(t.hide_column(s--),o.parent().data("row",s),$(".shortcake-columns-add-column").removeAttr("disabled"),0===s&&o.attr("disabled","disabled"))}),$("input[name=columns_block_style]").off("click").on("click",function(){e.toggle_images()})},e.hide_column=function(e){const t=$(".field-block").filter($("div[class$='_"+e+"']"));t.children().filter($("input, textarea")).each(function(e,t){$(t).val("").trigger("input")}),t.find($(".attachment-previews .remove")).each(function(e,t){$(t).click()}),t.hide(300)},e.hide_all_columns=function(){[1,2,3,4].forEach(function(e){$(".field-block").filter($("div[class$='_"+e+"']")).hide()})},e.show_column=function(t){$(".field-block").filter($("div[class$='_"+t+"']")).show(300,function(){e.toggle_images(),$(".media-frame-content").animate({scrollTop:$(".shortcode-ui-content").prop("scrollHeight")},300)})},e.toggle_images=function(){[1,2,3,4].forEach(function(e){const t=$(".field-block").filter($("div[class$='title_"+e+"']")).is(":visible"),o=$("input[name=columns_block_style]:checked").val(),s="no_image"!=o;$(".shortcode-ui-attribute-attachment_"+e).toggle(t&&s);const i=$("body").hasClass("post-type-campaign");t&&("no_image"==o&&i?($(".shortcode-ui-attribute-link_"+e).hide(),$(".shortcode-ui-attribute-cta_text_"+e).hide()):($(".shortcode-ui-attribute-link_"+e).show(),$(".shortcode-ui-attribute-cta_text_"+e).show()))})}}function CookiesBlock(){const e=this;e.cookie=readCookie("greenpeace"),e.setNoTrackCookie=function(){$("#necessary_cookies").is(":checked")||$("#all_cookies").is(":checked")?createCookie("no_track","true",-1):createCookie("no_track","true",7300)},"1"===e.cookie?$("#necessary_cookies").prop("checked",!0):"2"===e.cookie&&($("#necessary_cookies").prop("checked",!0),$("#all_cookies").prop("checked",!0)),$("#necessary_cookies").on("change",function(){$("#necessary_cookies").is(":checked")?(createCookie("greenpeace","1",365),$(".cookie-notice").slideUp("slow")):($("#all_cookies").prop("checked",!1),createCookie("greenpeace","0",-1),$(".cookie-notice").show()),e.setNoTrackCookie()}),$("#all_cookies").on("change",function(){$("#all_cookies").is(":checked")?($("#necessary_cookies").prop("checked",!0),createCookie("greenpeace","2",365),$(".cookie-notice").slideUp("slow")):$("#necessary_cookies").is(":checked")?createCookie("greenpeace","1",365):(createCookie("greenpeace","0",-1),$(".cookie-notice").show()),e.setNoTrackCookie()})}function GalleryBlock(){const e=this;let t={views:{},models:{},data:{}};e.cleanup_current_view=function(){t.data.CurrentView&&(t.data.CurrentView.remove(),t.data.CurrentView=null)},e.gallery_image_change_hook=function(o,s,i){let c=i.attributes.attrs.models,a=o.value,l={};c.forEach(function(e){let t=e.get("attr");if("gallery_block_focus_points"===t){let o=$('input[name="'+t+'"]'),s=e.get("value");if(s=s.replace(/'/g,'"'),s=$.parseJSON(s),void 0!==a){let t=a.toString().split(","),i={};$.each(t,function(e,t){null!==s&&s.hasOwnProperty(t)?i[t]=s[t]:i[t]="left top"}),i=(i=JSON.stringify(i)).replace(/"/g,"'"),e.set("value",i),o.val(i)}else l=s}}),e.update_focus_points=function(e,t){c.forEach(function(o){let s=o.get("attr");if("gallery_block_focus_points"===s){let i=$('input[name="'+s+'"]'),c=o.get("value"),a="[]";a=(c=c.replace(/'/g,'"'))||{img_id:t};const l=$.parseJSON(a);l.hasOwnProperty(e)&&(l[e]=t),c=(c=JSON.stringify(l)).replace(/"/g,"'"),o.set("value",c),i.val(c)}})},e.cleanup_current_view(),$(".shortcake-attachment-preview").each(function(){let e=$(this).find("button").attr("data-id"),o="focus_point_"+e;$(this).find(".thumbnail-details-container").append('<div id="'+o+'"></div>');let s="";l.hasOwnProperty(e)&&(s=l[e]),t.data.focus_point=new t.models.FocusPointModel,t.data.focus_point.set({img_id:e,focus_points:s}),t.data.CurrentView=new t.views.FocusPointView({el:"#"+o,model:t.data.focus_point}),t.data.CurrentView.render()})},t.models.FocusPointModel=Backbone.Model.extend({defaults:{img_id:"not yet set",focus_points:"no author yet"}}),t.views.FocusPointView=Backbone.View.extend({events:{"change select[class=img-focus-point]":"update_focus_point_data"},render:function(){let t=this.$el.attr("id"),o=this.model.get("focus_points"),s=this.$el.parent().find(".dimensions").html(),i=this.get_image_type(s),c=[],a="";a+="<hr>","portrait"===i?(c=image_focus_points.portrait,a+='<img src="'+image_focus_points.options_img_grid.portrait+'">'):(c=image_focus_points.landscape,a+='<img src="'+image_focus_points.options_img_grid.landscape+'">'),a+="<label>"+image_focus_points.label+':</label><select name="focus_image_1" class="img-focus-point" id="img-'+t+'" placeholder="">',$.each(c,function(e,t){let s="";o===t.value&&(s="selected"),a+='<option value="'+t.value+'" '+s+">"+t.label+"</option>"}),a+="</select>",this.$el.html(a),this.model.set({focus_points:$("select#img-"+t,this.$el).find(":selected").val()}),e.update_focus_points(this.model.get("img_id"),this.model.get("focus_points"))},update_focus_point_data:function(t){t.preventDefault();let o=$("select#img-"+this.$el.attr("id"),this.$el),s=this.$el.attr("id").replace(/[^\d.]/g,"");this.model.set({img_id:s,focus_points:o.find(":selected").val()}),e.update_focus_points(this.model.get("img_id"),this.model.get("focus_points"))},get_image_type:function(e){let t="landscape";if(void 0!==e){e=e.split("×");let o=parseInt(e[0],10),s=parseInt(e[1],10);t=o>s?"landscape":o<s?"portrait":"landscape"}return t}})}function NewCoversBlock(){const e=this;e.type_of_cover_change_hook=function(){const e=$("input[name=cover_type]:checked").val();"undefined"!==e&&("1"===e?($("select[id^='shortcode-ui-post_types']").prop("disabled","disabled"),$("select[id^='shortcode-ui-posts']").prop("disabled",!1),$("select[id^='shortcode-ui-posts']").val(null).trigger("change"),$("select[id^='shortcode-ui-tags']").val(null).trigger("change")):"2"===e?($("select[id^='shortcode-ui-post_types']").prop("disabled","disabled"),$("select[id^='shortcode-ui-posts']").prop("disabled","disabled"),$("select[id^='shortcode-ui-posts']").val(null).trigger("change"),$("select[id^='shortcode-ui-tags']").val(null).trigger("change")):"3"===e&&($("select[id^='shortcode-ui-post_types']").prop("disabled",!1),$("select[id^='shortcode-ui-posts']").prop("disabled",!1),$("select[id^='shortcode-ui-posts']").val(null).trigger("change"),$("select[id^='shortcode-ui-tags']").val(null).trigger("change")))},e.initialize_view_fields=function(){const e=$("input[name=cover_type]:checked").val(),t=$("select[id^='shortcode-ui-posts']").val(),o=$("select[id^='shortcode-ui-tags']").val(),s=$("select[id^='shortcode-ui-post_types']").val();"undefined"!==e&&("1"===e?($("select[id^='shortcode-ui-post_types']").prop("disabled","disabled"),$("select[id^='shortcode-ui-post_types']").val(null).trigger("change"),null===o&&null===s||($("select[id^='shortcode-ui-posts']").prop("disabled","disabled"),$("select[id^='shortcode-ui-posts']").val(null).trigger("change")),null!==t&&($("select[id^='shortcode-ui-tags']").prop("disabled","disabled"),$("select[id^='shortcode-ui-tags']").val(null).trigger("change"))):"2"===e?($("select[id^='shortcode-ui-post_types']").prop("disabled","disabled"),$("select[id^='shortcode-ui-post_types']").val(null).trigger("change"),$("select[id^='shortcode-ui-posts']").prop("disabled","disabled"),$("select[id^='shortcode-ui-posts']").val(null).trigger("change")):"3"===e&&(null===o&&null===s||($("select[id^='shortcode-ui-posts']").prop("disabled","disabled"),$("select[id^='shortcode-ui-posts']").val(null).trigger("change")),null!==t&&($("select[id^='shortcode-ui-tags']").prop("disabled","disabled"),$("select[id^='shortcode-ui-tags']").val(null).trigger("change"),$("select[id^='shortcode-ui-post_types']").prop("disabled","disabled"),$("select[id^='shortcode-ui-post_types']").val(null).trigger("change"))))},e.post_types_change_hook=function(){const e=$("input[name=cover_type]:checked").val(),t=$("select[id^='shortcode-ui-tags']").val(),o=$("select[id^='shortcode-ui-post_types']").val(),s=$("select[id^='shortcode-ui-posts']").val();"undefined"!==e&&"3"===e&&(null!==o?($("select[id^='shortcode-ui-tags']").prop("disabled",!1),$("select[id^='shortcode-ui-post_types']").prop("disabled",!1),$("select[id^='shortcode-ui-posts']").val(null).trigger("change"),$("select[id^='shortcode-ui-posts']").prop("disabled","disabled")):null===t&&null===s&&null===o&&($("select[id^='shortcode-ui-tags']").prop("disabled",!1),$("select[id^='shortcode-ui-post_types']").prop("disabled",!1),$("select[id^='shortcode-ui-posts']").prop("disabled",!1)))},e.posts_select_change_hook=function(){const e=$("input[name=cover_type]:checked").val(),t=$("select[id^='shortcode-ui-posts']").val();"undefined"!==e&&(null!==t?"1"===e?($("select[id^='shortcode-ui-tags']").val(null).trigger("change"),$("select[id^='shortcode-ui-tags']").prop("disabled","disabled")):"3"===e&&($("select[id^='shortcode-ui-tags']").val(null).trigger("change"),$("select[id^='shortcode-ui-tags']").prop("disabled","disabled"),$("select[id^='shortcode-ui-post_types']").val(null).trigger("change"),$("select[id^='shortcode-ui-post_types']").prop("disabled","disabled")):"1"===e?$("select[id^='shortcode-ui-tags']").prop("disabled",!1):"3"===e&&($("select[id^='shortcode-ui-tags']").prop("disabled",!1),$("select[id^='shortcode-ui-post_types']").prop("disabled",!1)))},e.tags_change_hook=function(){const e=$("input[name=cover_type]:checked").val(),t=$("select[id^='shortcode-ui-posts']").val(),o=$("select[id^='shortcode-ui-tags']").val(),s=$("select[id^='shortcode-ui-post_types']").val();"undefined"!==e&&("1"===e?null!==o||null!==s?($("select[id^='shortcode-ui-posts']").prop("disabled","disabled"),$("select[id^='shortcode-ui-posts']").val(null).trigger("change"),$("select[id^='shortcode-ui-post_types']").prop("disabled","disabled")):null===o&&null===t&&($("select[id^='shortcode-ui-tags']").prop("disabled",!1),$("select[id^='shortcode-ui-posts']").prop("disabled",!1)):"2"===e?($("select[id^='shortcode-ui-posts']").prop("disabled","disabled"),$("select[id^='shortcode-ui-posts']").val(null).trigger("change"),$("select[id^='shortcode-ui-tags']").prop("disabled",!1),$("select[id^='shortcode-ui-post_types']").val(null).trigger("change"),$("select[id^='shortcode-ui-post_types']").prop("disabled","disabled")):"3"===e&&(null!==o?($("select[id^='shortcode-ui-tags']").prop("disabled",!1),$("select[id^='shortcode-ui-post_types']").prop("disabled",!1),$("select[id^='shortcode-ui-posts']").val(null).trigger("change"),$("select[id^='shortcode-ui-posts']").prop("disabled","disabled")):null===o&&null===t&&null===s&&$("select[id^='shortcode-ui-posts']").prop("disabled",!1)))}}function SocialMediaBlock(){const e=this;e.initialize_fields=function(){e.set_default_embed_type(),e.toggle_facebook_page_options()},e.embed_type_change_hook=function(){e.toggle_facebook_page_options()},e.set_default_embed_type=function(){$("input[name=embed_type]:checked").val()||$("input[name=embed_type][value=oembed]").prop("checked",!0)},e.toggle_facebook_page_options=function(){const e=$(".shortcode-ui-attribute-facebook_page_tab");"facebook_page"===$("input[name=embed_type]:checked").val()?e.show():e.hide()}}function SubmenuBlock(){this.editAttributeHeading=sui.views.editAttributeField.extend({tagName:"span",className:"block-attribute-wrapper",events:{"input  input":"inputChanged","input  textarea":"inputChanged","change select":"inputChanged",'change input[type="radio"]':"inputChanged",'change input[type="checkbox"]':"inputChanged"},inputChanged:function(e){let t;if(this.model.get("attr")&&(t=this.$el.find('[name="'+this.model.get("attr")+'"]')),"radio"===this.model.attributes.type||"p4_radio"===this.model.attributes.type)this.setValue(t.filter(":checked").first().val());else if("checkbox"===this.model.attributes.type||"p4_checkbox"===this.model.attributes.type)this.setValue(t.is(":checked"));else if("range"===this.model.attributes.type){const o="#"+e.target.id+"_indicator",s=e.target.value;document.querySelector(o).value=s,this.setValue(t.val())}else this.setValue(t.val());this.triggerCallbacks()},setValue:function(e){this.model.set("value",e)},triggerCallbacks:function(){const e=[this.shortcode.attributes.shortcode_tag,this.model.get("attr")].join("."),t=this.model.changed,o=_.flatten(_.values(this.views.parent.views._views)),s=this.shortcode;wp.shortcake.hooks.doAction(e,t,o,s)}}),sui.views.editAttributeHeading=this.editAttributeHeading}function TakeActionBoxoutBlock(){this.edit_custom_filed_hook=function(){$('[name="custom_title"]').val()||$('[name="custom_excerpt"]').val()||$('[name="custom_link"]').val()||$('[name="custom_link_text"]').val()||$('[name="tag_ids"]').val()||$(".shortcake-attachment-preview").length>0||$('[name="custom_link_new_tab"]')[0]&&$('[name="custom_link_new_tab"]')[0].checked?$(".shortcode-ui-post-select").prop("disabled",!0):$(".shortcode-ui-post-select").val()?($('[name="custom_title"]').prop("disabled",!0),$('[name="custom_excerpt"]').prop("disabled",!0),$('[name="custom_link"]').prop("disabled",!0),$('[name="custom_link_text"]').prop("disabled",!0),$('[name="tag_ids"]').prop("disabled",!0),$("#background_image").prop("disabled",!0),$('[name="custom_link_new_tab"]').prop("disabled",!0),$(".shortcake-attachment-select").prop("disabled",!0)):($(".shortcode-ui-post-select").removeAttr("disabled"),$('[name="custom_title"]').removeAttr("disabled"),$('[name="custom_excerpt"]').removeAttr("disabled"),$('[name="custom_link"]').removeAttr("disabled"),$('[name="custom_link_text"]').removeAttr("disabled"),$('[name="tag_ids"]').removeAttr("disabled"),$("#background_image").removeAttr("disabled"),$('[name="custom_link_new_tab"]').removeAttr("disabled"),$(".shortcake-attachment-select").removeAttr("disabled"))}}function P4BlocksAdminUI(e,t,o,s){const i=this;i.hooks_defined=!1,i.setupSelect2Fields=e,i.setupP4Fields=t,i.setupWPShortcakeHooks=o,i.blocksMap=s,i.blocks={},i.initialize_view_fields=function(e){switch(e){case"articles":i.blocks.ArticlesBlock.initialize_view_fields();break;case"newcovers":i.blocks.NewCoversBlock.initialize_view_fields()}},i.find_view=function(e,t){return _.find(e,function(e){return t===e.model.get("attr")})},i.setupBlock=function(e){i.blocks[e]=new i.blocksMap[e](i)},i.setup=function(){i.setupSelect2Fields(),i.setupP4Fields(),i.setupWPShortcakeHooks(i);for(let e in i.blocksMap)i.setupBlock(e)}}jQuery(function(e){"use strict";new P4BlocksAdminUI(Select2FieldsSetup,P4FieldsSetup,WPShortcakeHooksSetup,{ArticlesBlock:ArticlesBlock,CarouselHeaderBlock:CarouselHeaderBlock,ColumnsBlock:ColumnsBlock,NewCoversBlock:NewCoversBlock,SocialMediaBlock:SocialMediaBlock,SubmenuBlock:SubmenuBlock,TakeActionBoxoutBlock:TakeActionBoxoutBlock,GalleryBlock:GalleryBlock}).setup()});
//# sourceMappingURL=admin/blocks-admin.min.js.map
